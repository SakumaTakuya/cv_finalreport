#:kivy 1.11.1
#: import NoTransition kivy.uix.screenmanager.NoTransition

<SelectReferenceScreen>:
    BoxLayout:
        orientation: "vertical"
        RectDrawImage:
            id: image
            size_hint_y: 0.9
            texture: root.texture
            can_draw: root.is_loaded
            on_add_point: root.add_pixels(*args)
            on_complete: root.activate_next()
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: 0.1
            Button:
                id: select_button
                text: "select image"
                disabled: False
                on_press: root.show_load()
                on_press: image.clear()
            Button:
                id: next_button
                text: "next >"
                disabled: True
                on_press: root.go_next()


<SelectDestinationScreen>:
    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: 0.9
            Image:
                texture: root.texture
                size_hint_x: 0.5
            Image:
                texture: root.texture
                size_hint_x: 0.5
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: 0.1
            Button:
                id: select_button
                text: "select image"
                disabled: False
                on_press: root.show_load()
            Button:
                id: next_button
                text: "next >"
                disabled: True
                on_press: root.go_next()



<TestWidget>:
    BoxLayout:
        orientation: "vertical"
        size: root.size
        ActionBar:
            ActionView:
                ActionPrevious:
        ScreenManager:
            transition: NoTransition()
            SelectReferenceScreen:
                id: select_reference
                name: "select_reference"
                next_state: "select_dest"
                on_leave: root.set_reference(self.cv_img, self.points)
            SelectDestinationScreen:
                name: "select_dest"
                next_state: "select_reference"
                on_leave: root.set_destination(self.cv_img)